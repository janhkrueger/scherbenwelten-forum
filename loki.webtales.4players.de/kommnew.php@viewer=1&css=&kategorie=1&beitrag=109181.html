 
				<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Page-Exit"
	content="RevealTrans(Duration=0,Transition=6 )">
<link rel=stylesheet type="text/css" href="pergament.css">
<title>Abo Bildschirm auf einmal</title>
</head>

<body background="pics/bg.gif">

	<table align="center" border="0" width="90%" cellspacing="0"
		cellpadding="0">

		<tr>

			<td width="8" height="8" background="pics/ol.jpg"><img
				src="pics/netscape.gif" width="38" height="38">
			</td>

			<td background="pics/om.jpg" height="8" width="*"><img
				src="pics/netscape.gif" width="38" height="38">
			</td>

			<td width="8" height="8" background="pics/or.jpg"><img
				src="pics/netscape.gif" width="38" height="38">
			</td>

		</tr>

		<tr>

			<td width="8" background="pics/lm.jpg"><img
				src="pics/netscape.gif" width="5" height="5"
				alt="netscape.gif (814 Byte)"></td>

			<td background="pics/m.jpg" width="*"
				align="center">



				<table width="100%" border="0">
					<tr>
						<td width="15%" align="center"><aa href="game.html"> <img
								border="0" src="pics/town.gif"> <br>
							<b></b> </a>
						
						</td>
						<td align="center" width="70%">

							<h1>
							Das schwarze Brett							</h1>
						</td>
						<td width="15%" align="center"><aa href="game.html"> <img
								border="0" src="pics/town.gif"> <br>
							<b></b> </a>
						
						</td>
					</tr>
				</table>  <script language=javascript>
		function oeffne(ot_id)
		{
			try { 
    if (parent.mus && parent.mus.Assi==true) 
    {
      parent.mus.Merlin.StopAll();
      parent.mus.Merlin.Play("Write"); 
      parent.mus.Merlin.Play("WriteReturn"); 
    }
    } catch (err) {

    }

			test = String(Math.floor(Math.random()*10000));

			window.open("message.php?targetid="+ot_id,'menue1451554938' + test,'width=550,height=350');
		}
		</script>  


				<table cellpadding="3" cellspacing="0" width="95%" align="center"
					border="0">
					<tr>
						<td width="100%" align="center"><table align="center"
								cellpadding="3" cellspacing="0" width="100%" border="0">


																<tr>
									<td colspan="2"><a
										href="kommnew.php@viewer=1&amp;css=.html">Übersicht</a>,
										<a
										href="kommnew.php@viewer=1&amp;css=&amp;kategorie=1.html">Allgemeines									</a></td>
									<td></td>
								</tr>
																<tr>
									<td colspan="3" align="left"><b>Abo Bildschirm auf einmal </b> <br>
										<hr></td>
								</tr>
								
								
								<tr >
									<td width="10%" align="center">Elijah (RIP)									</td>

									<td width="75%"> nach &quot;Status prüfen&quot; zwar weg,<br>
aber jedes mal wenn ich auf Accdaten geh, muss ich ihm neu die Daten via prüfen ziehen lassen    </td>
									<td width="100" align="center">08.06.08 23:05<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325333"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Braniag (RIP)									</td>

									<td width="75%"> Goose ist im IRC und arbeitet dran.    </td>
									<td width="100" align="center">08.06.08 23:06<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325334"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Nathan von Xanthias (RIP)									</td>

									<td width="75%"> jupp wollte auch gerade Fragen ob das normal sein soll...    </td>
									<td width="100" align="center">08.06.08 23:06<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325335"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Elijah (RIP)									</td>

									<td width="75%"> solangs nicht wieder auf ein Backup rausläuft bin ich mit jeder Lösung zurfrieden ^^<br>
<br>
(und ich morgen früh wieder meine AP verbraten kann)    </td>
									<td width="100" align="center">08.06.08 23:07<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325337"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Elijah (RIP)									</td>

									<td width="75%"> hat wohl hiermit zu tun ;&gt;<br>
<br>
8.06.2008 23:07	Exitus	Gwain Gond ist verstorben<br>
8.06.2008 23:07	Exitus	lumbe ist verstorben<br>
8.06.2008 23:07	Exitus	DrOst ist verstorben<br>
8.06.2008 23:07	Exitus	ursiel ist verstorben<br>
8.06.2008 23:07	Exitus	Selene Deekart ist verstorben<br>
8.06.2008 23:07	Exitus	Ameriga Vespucci ist verstorben<br>
8.06.2008 23:07	Exitus	Seppl der Kleine ist verstorben<br>
8.06.2008 23:07	Exitus	Julia von Purjar ist verstorben<br>
8.06.2008 23:07	Exitus	Nessa Gilgon`gahlad ist verstorben<br>
8.06.2008 23:07	Exitus	Brigendor ist verstorben<br>
8.06.2008 23:07	Exitus	Rayden ist verstorben    </td>
									<td width="100" align="center">08.06.08 23:08<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325339"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center"><b>Felaria Mendalon</b> </b><br>  <img width="60"
										src="http://www.wlan-tech.org/prinz/WFrostrose(1).GIF"> 									</td>

									<td width="75%"> hmm ich hab plötzlich status schnupperacc ( nach 4 jahren ) also ich weiss net aber wenn 4 players nicht abbucht ist das nicht mein versäumniss oder?<br>
<br>
    </td>
									<td width="100" align="center">08.06.08 23:13<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325348"><img
											border="0" src="smile.gif"> </a>  <br>  <a
										href="javascript:oeffne(21908)"><img
											border="0" src="brieffliege.gif"> </a>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center"><b>Felaria Mendalon</b> </b><br>  <img width="60"
										src="http://www.wlan-tech.org/prinz/WFrostrose(1).GIF"> 									</td>

									<td width="75%"> ups geht wieder..    </td>
									<td width="100" align="center">08.06.08 23:14<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325349"><img
											border="0" src="smile.gif"> </a>  <br>  <a
										href="javascript:oeffne(21908)"><img
											border="0" src="brieffliege.gif"> </a>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Elijah (RIP)									</td>

									<td width="75%"> [23:10]	Goose: jetzt sollte alles wieder ok sein<br>
[23:11]	Goose: ein sehr seltsamer fehler ... sehr seltsam<br>
    </td>
									<td width="100" align="center">08.06.08 23:14<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325350"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Nalon din Adun (RIP)									</td>

									<td width="75%"> [23:22] &lt;Goose&gt; uns ist in einer tabelle für die abos eine spalte &quot;verloren&quot; gegangen und da der update der abodaten nicht mehr funktionierte habe ich mir daseben mal genauer angeschaut ... nachder ersten korrektur funktionierte dann zwar das löschen der datensätze, aber keine neuen inserts, da die tabelle eben unvoständig war<br>
[23:23] &lt;Goose&gt; nur gehen wir eben an diese tabelle im grunde NIE dran, weil das alles automatisch läuft    </td>
									<td width="100" align="center">08.06.08 23:31<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325357"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Marduc (RIP)									</td>

									<td width="75%"> ...nunja, bei mir scheint das mit &quot;Status prüfen&quot; nicht zu funktionieren!<br>
<br>
APs verfallen, Produktion kann nicht geleert werden und Stadt crasht.<br>
Was solls, die neue Generation SW!    </td>
									<td width="100" align="center">09.06.08 1:02<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325374"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Narndil Biunda v. Tacheless (RIP)									</td>

									<td width="75%"> Welch armes Schweinchen (muss ja nicht mal zwingend ein SW-ler sein) Hat sich denn da in die DB gehackt? Ham die Leute keine andere Hobbys die sowas machen um anderen zu schaden?    </td>
									<td width="100" align="center">09.06.08 6:41<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325385"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center"><b>Solara</b> </b><br>  <img width="60"
										src="pics/KardaRose-Wappen.gif"> 									</td>

									<td width="75%"> oder ne aufräumaktion/fehlfunktion bei automatischer löschung gekündigter abos, bzw. jener die ned automatisch verlängert werden? unser rayden hatte sein abo schon fast zwei jahren gekündigt und war seither inaktiv.     </td>
									<td width="100" align="center">09.06.08 7:20<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325394"><img
											border="0" src="smile.gif"> </a>  <br>  <a
										href="javascript:oeffne(21205)"><img
											border="0" src="brieffliege.gif"> </a>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Raphael (RIP)									</td>

									<td width="75%"> Hacker? Wer redet hier von Hackern? oO    </td>
									<td width="100" align="center">09.06.08 10:02<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325427"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Georgina von Dragon (RIP)									</td>

									<td width="75%"> Nur schade das es nicht hier bekannt gegeben wurde und die welche kein IRC hatten nichts mitbekommen haben :(    </td>
									<td width="100" align="center">09.06.08 11:49<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325445"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Nathan von Xanthias (RIP)									</td>

									<td width="75%"> deswegen gab es die Auszüge aus der IRC Tarabea    </td>
									<td width="100" align="center">09.06.08 12:24<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325449"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center"><b>Support</b> </b><br>  <img width="60" src="webtales/kobold2.gif"> 									</td>

									<td width="75%"> Also nur um irgendwelchen Gerüchten entgegenzuwirken ... <br>
<br>
Facts:<br>
- ein Versionsupgrade in der Paymentschnittstelle bei SW wurde in schon langer Vergangenheit bewusst NICHT durchgeführt, da hierbei keine wesentliche funktionale Erweiterung erreicht werden konnte<br>
<br>
- aufgrund historisch gewachsener "Ängste" haben wir den Update der Payment-Informationen eben NICHT täglich durchgeführt, sondern zumeist manuell, wenn wir dachten, es wäre mal wieder notwendig<br>
<br>
- nach der nun erfolgten Umstellung und massiven Sensibilisierung bei 4P, was den Umgang mit den Paymentinformationen angeht, wollten wir nun diesen Aktualisierungsprozess wieder in jeder Nacht durchführen<br>
<br>
- bei jedem Durchlauf eines unserer Hintergrundsgripte wird überprüft, ob inaktive Accounts vorhanden sind, welche KEIN Abo halten und somit aus Gründen der Performancesicherung gelöscht werden können<br>
<br>
Problembeschreibung:<br>
Aus bislang noch nicht geklärten Gründen (Timeout?) konnte auch die manuelle Aktualisierung nicht durchgeführt werden.<br>
<br>
Eine mögliche Erklärung wäre evtl. eine beschädigte PHP gewesen, weshalb sämtliche das Payment betreffende PHPs von Galactic-Tales (dort rennt das Payment bislang sehr gut) kopiert wurden.<br>
<br>
Dann habe ich mir gestern gegen 23:00 Uhr den Ablauf mal etwas genauer anschauen wollen und die entsprechende Payment-PHP direkt auf einem unserer Webserver angestartet.<br>
<br>
Hier nun zwar eine sehr lange Laufzeit (wird auch noch untersucht), aber das Script fand ein Ende ... mit leider einigen Fehlermeldungen, die Rückschluss darauf gaben, dass die Datensätze nicht physikalisch aktualisiert werden konnten.<br>
<br>
Fehlersuche und Problemauswirkung:<br>
Nun also die Suche nach dem Warum ... währenddessen konnte ich dann also feststellen, dass das Paymentaktualisierungssgript zwar ja erfolglos versucht hatte neue Datensätze in die DB zu bringen, aber durchaus Erfolg zeigte, die nun eigentlich veralteten Datensätze im Laufe des Scripts zu markieren und letztlich auch zu löschen.<br>
<br>
Dann kam es leider zu einer sehr unschönen Kettenreaktion ...<br>
- das Hintergrundscript lief an<br>
- identifizierte inaktive Accounts<br>
- da die Paymenttabelle leer, also auch alle inaktiven Accounts OHNE Abo!<br>
- Löschen der inaktiven Accounts OHNE Abo (daher die "Todeswelle" um 23:07 Uhr)<br>
<br>
Ich suchte ja noch weiter nach dem Problem, warum die Datensätze nicht in die DB geschrieben werden konnten ... <br>
<br>
   ... es dauerte etwas, bis mir auffiel, dass die Paymenttabellen von GT und SW eine Differenz in der Spaltenanzahl hatten. <br>
<br>
Das nun von GT kopierte Paymentscript war die aktuelle Version ... durch den bewusst nicht vorgenommenen Update der SW-Paymentschnittstelle, war die Tabellenstruktur aber noch in einer alten Version.<br>
<br>
So konnte also aufgrund dieses Deltas keine neuen Datensätze in die DB aufgenommen werden.<br>
<br>
Ich habe dann die Tabellenstruktur nun aktualisiert und das Paymentsgript erneut laufen lassen ... et voila ... Abos aktualisiert und Datensätze in der Tabelle.<br>
<br>
Aktion zur Vermeidung von Folgefehlern:<br>
Alle Accounts die zwar nicht genutzt werden aber durch ein Abo geschützt sind, werden in der Datenbank nun nicht mehr so weit "altern", als das das Hintergrundsgript diese als "inaktiv" bewertet.<br>
<br>
Sollte also z.B. mal ein Datensatz zu einem Abo an einem Tag nicht aktualisiert werden, so könnte innerhalb der nächsten 14 Tage der fehlende Datensatz nachgereicht werden, OHNE hier Gefahr zu laufen, den Account zu früh zu entfernen.<br>
<br>
---<br>
Dies sollte nur mal ein kleiner Exkurs in die Welt der Programmierung und Betrieb eines Webgames sein, welcher vielleicht ein wenig aufzeigt, dass die Verkettung unglücklicher Umstände so manchen Ärger bereiten kann auf den man kaum vorbereitet sein kann.<br>
<br>
Grüße<br>
Goose    </td>
									<td width="100" align="center">09.06.08 13:34<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325463"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center">Don Gom (RIP)									</td>

									<td width="75%"> :-) bin jetzt super aufgeklährt.<br>
da weiß man ja wieder den Zeitaufwand einer Doku zu schätzen.<br>
Fleißarbeit weiß nicht jeder zu schätzen.     </td>
									<td width="100" align="center">10.06.08 22:19<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1325834"><img
											border="0" src="smile.gif"> </a>  <br>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr >
									<td width="10%" align="center"><b>Kantar</b> </b><br>  <img width="60"
										src="http://www.kroeters-paradise.de/WappenKantar.gif"> 									</td>

									<td width="75%"> Aus einem Komma und einem Punkt können so wundersamerweise Stunden Arbeit entstehn^^    </td>
									<td width="100" align="center">14.06.08 21:45<br> <a
										href="http://loki.webtales.4players.de/kommnew.php?viewer=1&amp;page=0&amp;css=&amp;kategorie=1&amp;beitrag=109181&amp;votefor=1326608"><img
											border="0" src="smile.gif"> </a>  <br>  <a
										href="javascript:oeffne(26179)"><img
											border="0" src="brieffliege.gif"> </a>  									</td>

								</tr>

								<tr>
									<td colspan="3"><hr></td>
								</tr>



								
								<tr>
									<td colspan="3" align="right"><a
										href="kommnew.php@viewer=1&amp;css=.html">Übersicht</a>,
										<a
										href="kommnew.php@viewer=1&amp;css=&amp;kategorie=1.html">Allgemeines									</a><br>
										<hr></td>
								</tr>

								

							</table>
						</td>
					</tr>
				</table> <div align="center"><hr size=1></div>
				<table>
					<tr>
						<td>


							</td>
							</tr>
						</table>





						 			</td>
			<td width="8" background="pics/rm.jpg"><img
				src="pics/netscape.gif" width="5" height="5"
				alt="netscape.gif (814 Byte)"></td>

		</tr>

		<tr>

			<td width="38" height="48"
				background="pics/ul.jpg"><img
				src="pics/netscape.gif" width="38" height="48">
			</td>

			<td background="pics/um.jpg" height="48" width="*"><img
				src="pics/netscape.gif" width="38" height="48">
			</td>

			<td width="38" height="48"
				background="pics/ur.jpg"><img
				src="pics/netscape.gif" width="38" height="48">
			</td>

		</tr>

	</table>



	<br><br><div align='right' style='position:absolute; right:20px;'><a href="http://www.4players.de" target="_blank" ><img border="0" src="pics/160x44_hosted_by_4players.jpg" width="160" height="44" alt="4Players"></a></div><br>
</body>
				</html> 